(this["webpackJsonpchatapp-client"]=this["webpackJsonpchatapp-client"]||[]).push([[0],{111:function(e,t,s){},145:function(e,t,s){},146:function(e,t,s){"use strict";s.r(t);var a=s(3),c=s(2),n=s.n(c),r=s(15),i=s(87),o=s(31),u=s.n(o),l=(s(71),s(20)),j=s(51),d=(s(108),s(88)),m=s.n(d),h=s(59),b=s(16),O={ADD_USERNAME:"ADD_USERNAME",ADD_ROOM:"ADD_ROOM",ADD_CURRENT_MESSAGE:"ADD_CURRENT_MESSAGE",ADD_TO_MESSAGES:"ADD_TO_MESSAGES",CLEAR_STATE:"CLEAR_STATE",ADD_IN_USERS:"ADD_IN_USERS"},p={username:"",room:"",message:"",messages:[],usersList:[]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.ADD_USERNAME:return Object(b.a)(Object(b.a)({},e),{},{username:t.payload});case O.ADD_ROOM:return Object(b.a)(Object(b.a)({},e),{},{room:t.payload});case O.ADD_CURRENT_MESSAGE:return Object(b.a)(Object(b.a)({},e),{},{message:t.payload});case O.ADD_TO_MESSAGES:return Object(b.a)(Object(b.a)({},e),{},{messages:[].concat(Object(h.a)(e.messages),[t.payload])});case O.CLEAR_STATE:return{username:"",room:"",message:"",messages:[]};case O.ADD_IN_USERS:return Object(b.a)(Object(b.a)({},e),{},{usersList:t.payload});default:return e}},x={LOGIN:"LOGIN",LOGOUT:"LOGOUT"},_={user:null},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.LOGIN:return Object(b.a)(Object(b.a)({},e),{},{user:t.payload});case x.LOGOUT:return Object(b.a)(Object(b.a)({},e),{},{user:null});default:return e}},g={key:"root",storage:m.a,whitelist:["chat","user"]},v=Object(l.c)({chat:f,user:N}),y=Object(j.a)(g,v);var E,S=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,A=Object(l.e)(y,S(l.a.apply(void 0,[]))),D=Object(j.b)(A),R=(j.b,s(111),s(41)),C=s(161),L=s(89),M=s.n(L),T=s(93),U=s.n(T),G=n.a.memo((function(e){var t=e.message,s=e.setMessage,c=e.sendMessage;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("form",{children:Object(a.jsx)("input",{type:"text",placeholder:"Type a message",value:t,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?c(e):null}})}),Object(a.jsx)(C.a,{onClick:function(e){return c(e)},children:Object(a.jsx)(U.a,{className:"white"})})]})})),I=function(e){var t=e.mess,s=t.user,n=t.message,r=t.createdAt,i=e.username,o=e.i,u=e.length,l=!1;s===i&&(l=!0);var j=Object(c.useRef)();return Object(c.useEffect)((function(){j.current&&j.current.scrollIntoView({smooth:!0})})),l?Object(a.jsxs)("div",{className:"chat__message chat__receiver",ref:o===u?j:null,children:[Object(a.jsx)("span",{className:"chat__name",children:s}),Object(a.jsxs)("div",{className:"chatContainer",children:[Object(a.jsx)("span",{className:"chat__mess",children:n}),Object(a.jsx)("span",{className:"chat__timestamp",children:r})]})]}):Object(a.jsxs)("div",{className:"chat__message",ref:o===u?j:null,children:[Object(a.jsx)("span",{className:"chat__name",children:s}),n,Object(a.jsx)("span",{className:"chat__timestamp",children:r})]})},P=n.a.memo((function(e){var t=e.username,s=e.messages,c=e.room,n=s.filter((function(e){return e.room===c})),r=n.length-1;return Object(a.jsx)(a.Fragment,{children:n.map((function(e,s){return Object(a.jsx)("div",{children:Object(a.jsx)(I,{mess:e,username:t,length:r,i:s})},s)}))})})),w=Object(r.b)((function(e){return{username:e.chat.username,messages:e.chat.messages,room:e.chat.room}}))(P),k=s(96),F=s.n(k),B=Object(r.b)((function(e){return{room:e.chat.room,messages:e.chat.messages}}))((function(e){var t,s=e.room,c=e.messages;return t=c.length>0?c[c.length-1].createdAt:"",Object(a.jsxs)("div",{className:"chat__headerInfo",children:[Object(a.jsxs)("h3",{className:"white",children:[s," \xa0"]}),Object(a.jsxs)("p",{className:"white",children:["Last message at ",t]})]})})),q=s(97),J=s.n(q),K=s(22),z=function(){return{type:x.LOGOUT}},H=s(60),Q=(H.a.initializeApp({apiKey:"AIzaSyBq6aBUf_3EnNoiGHxYdc5yoniFqQ1NMmc",authDomain:"chat-application-1ad88.firebaseapp.com",projectId:"chat-application-1ad88",storageBucket:"chat-application-1ad88.appspot.com",messagingSenderId:"410508817932",appId:"1:410508817932:web:35e04662df4676793aa029",measurementId:"G-YCHSK7SQ8L"}).firestore(),H.a.auth()),V=new H.a.auth.GoogleAuthProvider,W=s(94),X=s.n(W),Y=s(95),Z=s.n(Y),$=function(){return{type:O.CLEAR_STATE}},ee=s(162),te=function(e){var t=e.username,s=e.displayPhoto;return Object(a.jsxs)("div",{className:"sidebarChat",children:[Object(a.jsx)(ee.a,{src:s,alt:"profile-pic"}),Object(a.jsx)("div",{className:"sidebar__chatInfo",children:Object(a.jsx)("h2",{children:t})})]})},se=n.a.memo((function(e){var t,s=e.addUserName,n=e.addRoomName,r=e.addMessage,i=e.addMessToArr,o=e.clearChatState,u=e.logout,l=e.addToUsers,j=e.displayPhoto,d=e.usersList,m=e.email,b=e.username,O=e.room,p=Object(c.useState)(""),f=Object(R.a)(p,2),x=f[0],_=f[1],N=Object(c.useState)([]),g=Object(R.a)(N,2),v=g[0],y=g[1],S=Object(c.useState)([]),A=Object(R.a)(S,2),D=A[0],L=A[1];t="https://yadnesh-chat-app.herokuapp.com/",Object(c.useEffect)((function(){return(E=M()(t)).emit("join",{username:b,room:O,displayPhoto:j,email:m},(function(e){e&&alert(e)})),function(){E.off("join")}}),[t,n,O,b,s,j,m]),Object(c.useEffect)((function(){return E.on("message",(function(e){y([].concat(Object(h.a)(v),[e])),i(e)})),function(){E.off("message")}}),[v,i,l]),Object(c.useEffect)((function(){return E.on("roomData",(function(e){var t=e.users;l(t)})),function(){E.off("roomData")}}));return Object(a.jsxs)("div",{className:"chat",children:[Object(a.jsxs)("div",{className:"chat__header",children:[Object(a.jsx)(X.a,{className:"groupIcon"}),Object(a.jsx)(B,{room:O}),Object(a.jsxs)("div",{className:"chat__headerRight",children:[Object(a.jsx)(C.a,{children:Object(a.jsxs)("div",{className:"tooltip",children:[Object(a.jsx)(Z.a,{className:"white memberIcon",onClick:function(){L(!D)}}),Object(a.jsx)("span",{className:"tooltiptext",children:"Group Members"})]})}),Object(a.jsx)(C.a,{children:Object(a.jsxs)("div",{className:"tooltip",children:[Object(a.jsx)(K.b,{to:"/room",className:"exit__button",children:Object(a.jsx)(F.a,{className:"white"})}),Object(a.jsx)("span",{className:"tooltiptext",children:"Exit Chat Room"})]})}),Object(a.jsx)(C.a,{children:Object(a.jsx)("div",{className:"tooltip",children:Object(a.jsxs)(K.b,{to:"/",className:"logout__button",onClick:function(){u(),o(),Q.signOut()},children:[Object(a.jsx)("span",{className:"tooltiptext",children:"Log out"}),Object(a.jsx)(J.a,{className:"white"})]})})})]})]}),Object(a.jsx)("div",{className:"chat__body",children:D?Object(a.jsx)(w,{username:b,messages:v}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"sidebar__search",children:Object(a.jsx)("h4",{className:"userList",children:"Users currently online"})}),Object(a.jsx)("div",{className:"sidebar__chats",children:d?d.map((function(e,t){return Object(a.jsx)("div",{children:Object(a.jsx)(te,{username:e.username,displayPhoto:e.displayPhoto})},t)})):Object(a.jsx)(te,{})})]})}),Object(a.jsx)("div",{className:"chat__footer",children:Object(a.jsx)(G,{message:x,setMessage:_,sendMessage:function(e){e.preventDefault(),x&&E.emit("sendMessage",x,(function(){_(""),r("")}))}})})]})})),ae=Object(r.b)((function(e){return{displayPhoto:e.user.user.photo,photo:e.user.user.photo,displayName:e.user.user.displayName,usersList:e.chat.usersList,email:e.user.user.email,username:e.chat.username,room:e.chat.room}}),(function(e){return{addMessage:function(t){return e(function(e){return{type:O.ADD_CURRENT_MESSAGE,payload:e}}(t))},addMessToArr:function(t){return e(function(e){return{type:O.ADD_TO_MESSAGES,payload:e}}(t))},clearChatState:function(){return e($())},logout:function(){return e(z())},addToUsers:function(t){return e(function(e){return{type:O.ADD_IN_USERS,payload:e}}(t))}}}))(se),ce=Object(r.b)((function(e){return{photo:e.user.user.photo,displayName:e.user.user.displayName,usersList:e.chat.usersList}}))((function(e){var t=e.photo,s=e.displayName,c=e.usersList;return Object(a.jsxs)("div",{className:"sidebar",children:[Object(a.jsxs)("div",{className:"sidebar__header",children:[Object(a.jsx)(ee.a,{src:t,alt:"profile-pic"}),Object(a.jsx)("div",{className:"sidebar__headerRight",children:Object(a.jsx)("h1",{className:"displayName",children:s})})]}),Object(a.jsx)("div",{className:"sidebar__search",children:Object(a.jsx)("h4",{className:"userList",children:"Group Members"})}),Object(a.jsx)("div",{className:"sidebar__chats",children:c?c.map((function(e,t){return Object(a.jsx)("div",{children:Object(a.jsx)(te,{username:e.username,displayPhoto:e.displayPhoto})},t)})):Object(a.jsx)(te,{})})]})})),ne=function(){return Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)("div",{className:"app__body",children:[Object(a.jsx)(ce,{}),Object(a.jsx)(ae,{})]})})},re=s(10),ie=Object(r.b)((function(e){return{username:e.user.user.displayName}}),(function(e){return{addUserName:function(t){return e(function(e){return{type:O.ADD_USERNAME,payload:e}}(t))},addRoomName:function(t){return e(function(e){return{type:O.ADD_ROOM,payload:e}}(t))}}}))((function(e){var t=e.username,s=e.addUserName,n=e.addRoomName,r=Object(c.useState)(""),i=Object(R.a)(r,2),o=i[0],u=i[1];return Object(a.jsx)("div",{className:"centered-form",children:Object(a.jsxs)("div",{className:"centered-form__box",children:[Object(a.jsx)("h1",{className:"centered-form__title",children:"Enter Room Name"}),Object(a.jsxs)("form",{children:[Object(a.jsx)("input",{className:"centered-form__input",type:"text",placeholder:"Room",onChange:function(e){return u(e.target.value)},required:!0}),Object(a.jsx)(K.b,{onClick:function(e){return t&&o?null:e.preventDefault()},to:"/chat",children:Object(a.jsx)("button",{className:"centered-form__button",type:"submit",onClick:function(){s(t),n(o)},children:"Join"})})]})]})})})),oe=(s(145),s.p+"static/media/chat.f2145cb2.png"),ue=function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"forms-container",children:Object(a.jsx)("div",{className:"signin-signup",children:Object(a.jsxs)("form",{action:"#",className:"formclass sign-in-form",children:[Object(a.jsx)("h2",{className:"title",children:"Welcome to Chat-App"}),Object(a.jsx)("input",{type:"submit",onClick:function(e){e.preventDefault(),Q.signInWithPopup(V).catch((function(e){return alert(e.message)}))},value:"Login with Google",className:"btn solid"})]})})}),Object(a.jsx)("div",{className:"panels-container",children:Object(a.jsx)("div",{className:"panel left-panel",children:Object(a.jsx)("img",{src:oe,className:"image",alt:""})})})]})},le=s.p+"static/media/404error.4861ae77.svg",je=Object(r.b)(null,(function(e){return{clearChatState:function(){return e($())},logout:function(){return e(z())}}}))((function(e){var t=e.clearChatState,s=e.logout;return Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{className:"errorPage",src:le,alt:"Error 404 Page Not Found"}),Object(a.jsx)(K.b,{className:"errorPage__link",to:"/",children:Object(a.jsx)("button",{onClick:function(){t(),s(),Q.signOut()},children:"Go To Login Page"})})]})}));var de=Object(re.g)(Object(r.b)((function(e){return{user:e.user.user}}),(function(e){return{login:function(t){return e(function(e){return{type:x.LOGIN,payload:e}}(t))},logout:function(){return e(z())}}}))((function(e){var t=e.user,s=e.login,n=e.logout;return Object(c.useEffect)((function(){Q.onAuthStateChanged((function(e){e?s({uid:e.uid,photo:e.photoURL,email:e.email,displayName:e.displayName}):n()}))}),[s,n]),Object(a.jsx)("div",{children:Object(a.jsx)(K.a,{children:Object(a.jsxs)(re.d,{children:[Object(a.jsx)(re.b,{exact:!0,path:"/",render:function(){return t?Object(a.jsx)(re.a,{to:"/room"}):Object(a.jsx)(ue,{})}}),Object(a.jsx)(re.b,{exact:!0,path:"/room",component:ie}),Object(a.jsx)(re.b,{exact:!0,path:"/chat",component:ne}),Object(a.jsx)(re.b,{path:"*",component:je})]})})})}))),me=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,163)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),n(e),r(e)}))};u.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(r.a,{store:A,children:Object(a.jsx)(K.a,{children:Object(a.jsx)(i.a,{persistor:D,children:Object(a.jsx)(de,{})})})})}),document.getElementById("root")),me()},71:function(e,t,s){}},[[146,1,2]]]);
//# sourceMappingURL=main.1d8303c2.chunk.js.map