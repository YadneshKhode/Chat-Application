(this["webpackJsonpwhatsapp-mern"]=this["webpackJsonpwhatsapp-mern"]||[]).push([[0],{114:function(e,t,s){},153:function(e,t,s){},154:function(e,t,s){"use strict";s.r(t);var a=s(3),c=s(2),n=s.n(c),r=s(16),i=s(89),o=s(31),u=s.n(o),j=(s(72),s(20)),l=s(51),d=(s(111),s(90)),m=s.n(d),h=s(59),b=s(15),O={ADD_USERNAME:"ADD_USERNAME",ADD_ROOM:"ADD_ROOM",ADD_CURRENT_MESSAGE:"ADD_CURRENT_MESSAGE",ADD_TO_MESSAGES:"ADD_TO_MESSAGES",CLEAR_STATE:"CLEAR_STATE",ADD_IN_USERS:"ADD_IN_USERS"},p={username:"",room:"",message:"",messages:[],usersList:[]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.ADD_USERNAME:return Object(b.a)(Object(b.a)({},e),{},{username:t.payload});case O.ADD_ROOM:return Object(b.a)(Object(b.a)({},e),{},{room:t.payload});case O.ADD_CURRENT_MESSAGE:return Object(b.a)(Object(b.a)({},e),{},{message:t.payload});case O.ADD_TO_MESSAGES:return Object(b.a)(Object(b.a)({},e),{},{messages:[].concat(Object(h.a)(e.messages),[t.payload])});case O.CLEAR_STATE:return{username:"",room:"",message:"",messages:[]};case O.ADD_IN_USERS:return Object(b.a)(Object(b.a)({},e),{},{usersList:t.payload});default:return e}},x={LOGIN:"LOGIN",LOGOUT:"LOGOUT"},_={user:null},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x.LOGIN:return Object(b.a)(Object(b.a)({},e),{},{user:t.payload});case x.LOGOUT:return Object(b.a)(Object(b.a)({},e),{},{user:null});default:return e}},g={key:"root",storage:m.a,whitelist:["chat","user"]},v=Object(j.c)({chat:f,user:N}),y=Object(l.a)(g,v);var E,S=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||j.d,A=Object(j.e)(y,S(j.a.apply(void 0,[]))),D=Object(l.b)(A),R=(l.b,s(114),s(35)),L=s(169),M=s(91),T=s.n(M),C=s(10),U=s(95),G=s.n(U),I=n.a.memo((function(e){var t=e.message,s=e.setMessage,c=e.sendMessage;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("form",{children:Object(a.jsx)("input",{type:"text",placeholder:"Type a message",value:t,onChange:function(e){return s(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?c(e):null}})}),Object(a.jsx)(L.a,{onClick:function(e){return c(e)},children:Object(a.jsx)(G.a,{className:"white"})})]})})),w=function(e){var t=e.mess,s=t.user,c=t.message,n=t.createdAt,r=e.username;console.log("message in message component= "+c);var i=!1;return s===r.trim().toLowerCase()&&(i=!0),i?Object(a.jsxs)("p",{className:"chat__message chat__receiver",children:[Object(a.jsx)("span",{className:"chat__name",children:s}),Object(a.jsx)("span",{className:"chat__mess",children:c}),Object(a.jsx)("span",{className:"chat__timestamp",children:n})]}):Object(a.jsxs)("p",{className:"chat__message",children:[Object(a.jsx)("span",{className:"chat__name",children:s}),c,Object(a.jsx)("span",{className:"chat__timestamp",children:n})]})},P=n.a.memo((function(e){var t=e.username,s=e.messages,c=s.length-1;return Object(a.jsx)(a.Fragment,{children:s.map((function(e,s){return Object(a.jsx)("div",{children:Object(a.jsx)(w,{mess:e,username:t,length:c,i:s})},s)}))})})),k=Object(r.b)((function(e){return{username:e.chat.username,messages:e.chat.messages}}))(P),F=s(99),B=s.n(F),q=s(96),J=s.n(q),K=Object(r.b)((function(e){return{room:e.chat.room,messages:e.chat.messages}}))((function(e){var t,s=e.room,c=e.messages;return t=c.length>0?c[c.length-1].createdAt:"",Object(a.jsxs)("div",{className:"chat__headerInfo",children:[Object(a.jsxs)("h3",{className:"white",children:[s," \xa0"]}),Object(a.jsxs)("p",{className:"white",children:["Last message at ",t]})]})})),z=s(100),H=s.n(z),Q=s(22),W=function(){return{type:x.LOGOUT}},X=s(60),Y=(X.a.initializeApp({apiKey:"AIzaSyBq6aBUf_3EnNoiGHxYdc5yoniFqQ1NMmc",authDomain:"chat-application-1ad88.firebaseapp.com",projectId:"chat-application-1ad88",storageBucket:"chat-application-1ad88.appspot.com",messagingSenderId:"410508817932",appId:"1:410508817932:web:35e04662df4676793aa029",measurementId:"G-YCHSK7SQ8L"}).firestore(),X.a.auth()),V=new X.a.auth.GoogleAuthProvider,Z=s(97),$=s.n(Z),ee=s(98),te=s.n(ee),se=s(170),ae=function(e){var t=e.username,s=e.displayPhoto;return Object(a.jsxs)("div",{className:"sidebarChat",children:[Object(a.jsx)(se.a,{src:s,alt:"profile-pic"}),Object(a.jsx)("div",{className:"sidebar__chatInfo",children:Object(a.jsx)("h2",{children:t})})]})},ce=n.a.memo((function(e){var t=e.addUserName,s=e.addRoomName,n=e.addMessage,r=e.addMessToArr,i=e.clearChatState,o=e.logout,u=e.addToUsers,j=e.displayPhoto,l=e.usersList,d=Object(c.useState)(""),m=Object(R.a)(d,2),b=m[0],O=m[1],p=Object(c.useState)(""),f=Object(R.a)(p,2),x=f[0],_=f[1],N=Object(c.useState)(""),g=Object(R.a)(N,2),v=g[0],y=g[1],S=Object(c.useState)([]),A=Object(R.a)(S,2),D=A[0],M=A[1],U=Object(c.useState)([]),G=Object(R.a)(U,2),w=G[0],P=G[1],F="https://yadnesh-chat-application.herokuapp.com/",q=Object(C.f)();Object(c.useEffect)((function(){i()}),[i]),Object(c.useEffect)((function(){var e=J.a.parse(q.search),a=e.username,c=e.room;return E=T()(F),O(a),t(a),_(c),s(c),E.emit("join",{username:a,room:c,displayPhoto:j},(function(e){e&&alert(e)})),function(){E.off("join")}}),[F,q.search,s,t,j]),Object(c.useEffect)((function(){return E.on("message",(function(e){M([].concat(Object(h.a)(D),[e])),r(e)})),function(){E.off("message")}}),[D,r,u]),Object(c.useEffect)((function(){return E.on("roomData",(function(e){var t=e.users;u(t)})),function(){E.off("roomData")}}));return Object(a.jsxs)("div",{className:"chat",children:[Object(a.jsxs)("div",{className:"chat__header",children:[Object(a.jsx)($.a,{className:"groupIcon"}),Object(a.jsx)(K,{room:x}),Object(a.jsxs)("div",{className:"chat__headerRight",children:[Object(a.jsx)(L.a,{children:Object(a.jsxs)("div",{className:"tooltip",children:[Object(a.jsx)(te.a,{className:"white memberIcon",onClick:function(){P(!w)}}),Object(a.jsx)("span",{className:"tooltiptext",children:"Group Members"})]})}),Object(a.jsx)(L.a,{children:Object(a.jsxs)("div",{className:"tooltip",children:[Object(a.jsx)(Q.b,{to:"/room",className:"exit__button",children:Object(a.jsx)(B.a,{className:"white"})}),Object(a.jsx)("span",{className:"tooltiptext",children:"Exit Chat Room"})]})}),Object(a.jsx)(L.a,{children:Object(a.jsx)("div",{className:"tooltip",children:Object(a.jsxs)(Q.b,{to:"/",className:"logout__button",onClick:function(){o(),Y.signOut()},children:[Object(a.jsx)("span",{className:"tooltiptext",children:"Log out"}),Object(a.jsx)(H.a,{className:"white"})]})})})]})]}),Object(a.jsx)("div",{className:"chat__body",children:w?Object(a.jsx)(k,{username:b,messages:D}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"sidebar__search",children:Object(a.jsx)("h4",{className:"userList",children:"Users currently online"})}),Object(a.jsx)("div",{className:"sidebar__chats",children:l?l.map((function(e,t){return Object(a.jsx)("div",{children:Object(a.jsx)(ae,{username:e.username,displayPhoto:e.displayPhoto})},t)})):Object(a.jsx)(ae,{})})]})}),Object(a.jsx)("div",{className:"chat__footer",children:Object(a.jsx)(I,{message:v,setMessage:y,sendMessage:function(e){e.preventDefault(),v&&E.emit("sendMessage",v,(function(){y(""),n("")}))}})})]})})),ne=Object(r.b)((function(e){return{displayPhoto:e.user.user.photo,photo:e.user.user.photo,displayName:e.user.user.displayName,usersList:e.chat.usersList}}),(function(e){return{addUserName:function(t){return e(function(e){return{type:O.ADD_USERNAME,payload:e}}(t))},addRoomName:function(t){return e(function(e){return{type:O.ADD_ROOM,payload:e}}(t))},addMessage:function(t){return e(function(e){return{type:O.ADD_CURRENT_MESSAGE,payload:e}}(t))},addMessToArr:function(t){return e(function(e){return{type:O.ADD_TO_MESSAGES,payload:e}}(t))},clearChatState:function(){return e({type:O.CLEAR_STATE})},logout:function(){return e(W())},addToUsers:function(t){return e(function(e){return{type:O.ADD_IN_USERS,payload:e}}(t))}}}))(ce),re=Object(r.b)((function(e){return{photo:e.user.user.photo,displayName:e.user.user.displayName,usersList:e.chat.usersList}}))((function(e){var t=e.photo,s=e.displayName,c=e.usersList;return Object(a.jsxs)("div",{className:"sidebar",children:[Object(a.jsxs)("div",{className:"sidebar__header",children:[Object(a.jsx)(se.a,{src:t,alt:"profile-pic"}),Object(a.jsx)("div",{className:"sidebar__headerRight",children:Object(a.jsx)("h1",{className:"displayName",children:s})})]}),Object(a.jsx)("div",{className:"sidebar__search",children:Object(a.jsx)("h4",{className:"userList",children:"Users currently online"})}),Object(a.jsx)("div",{className:"sidebar__chats",children:c?c.map((function(e,t){return Object(a.jsx)("div",{children:Object(a.jsx)(ae,{username:e.username,displayPhoto:e.displayPhoto})},t)})):Object(a.jsx)(ae,{})})]})})),ie=function(){return Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)("div",{className:"app__body",children:[Object(a.jsx)(re,{}),Object(a.jsx)(ne,{})]})})},oe=Object(r.b)((function(e){return{username:e.user.user.displayName}}))((function(e){var t=e.username,s=Object(c.useState)(""),n=Object(R.a)(s,2),r=n[0],i=n[1];return Object(a.jsx)("div",{className:"centered-form",children:Object(a.jsxs)("div",{className:"centered-form__box",children:[Object(a.jsx)("h1",{className:"centered-form__title",children:"Enter Room Name"}),Object(a.jsxs)("form",{children:[Object(a.jsx)("input",{className:"centered-form__input",type:"text",placeholder:"Room",onChange:function(e){return i(e.target.value)},required:!0}),Object(a.jsx)(Q.b,{onClick:function(e){return t&&r?null:e.preventDefault()},to:"/chat?username=".concat(t,"&room=").concat(r),children:Object(a.jsx)("button",{className:"centered-form__button",type:"submit",children:"Join"})})]})]})})})),ue=(s(153),s.p+"static/media/chat.f2145cb2.png"),je=function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("div",{className:"forms-container",children:Object(a.jsx)("div",{className:"signin-signup",children:Object(a.jsxs)("form",{action:"#",className:"formclass sign-in-form",children:[Object(a.jsx)("h2",{className:"title",children:"Welcome to Chat-App"}),Object(a.jsx)("input",{type:"submit",onClick:function(e){e.preventDefault(),Y.signInWithPopup(V).catch((function(e){return alert(e.message)}))},value:"Login with Google",className:"btn solid"})]})})}),Object(a.jsx)("div",{className:"panels-container",children:Object(a.jsx)("div",{className:"panel left-panel",children:Object(a.jsx)("img",{src:ue,className:"image",alt:""})})})]})};var le=Object(C.g)(Object(r.b)((function(e){return{user:e.user.user}}),(function(e){return{login:function(t){return e(function(e){return{type:x.LOGIN,payload:e}}(t))},logout:function(){return e(W())}}}))((function(e){var t=e.user,s=e.login,n=e.logout;return Object(c.useEffect)((function(){Y.onAuthStateChanged((function(e){e?s({uid:e.uid,photo:e.photoURL,email:e.email,displayName:e.displayName}):n()}))}),[s,n]),Object(a.jsx)("div",{children:Object(a.jsxs)(Q.a,{children:[Object(a.jsx)(C.b,{path:"/room",component:oe}),Object(a.jsx)(C.b,{path:"/chat",component:ie}),Object(a.jsx)(C.b,{exact:!0,path:"/",render:function(){return t?Object(a.jsx)(C.a,{to:"/room"}):Object(a.jsx)(je,{})}})]})})}))),de=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,171)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),c(e),n(e),r(e)}))};u.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(r.a,{store:A,children:Object(a.jsx)(Q.a,{children:Object(a.jsx)(i.a,{persistor:D,children:Object(a.jsx)(le,{})})})})}),document.getElementById("root")),de()},72:function(e,t,s){}},[[154,1,2]]]);
//# sourceMappingURL=main.211d9852.chunk.js.map